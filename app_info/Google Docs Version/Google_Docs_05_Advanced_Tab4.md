# TAB 4: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Management

## 24. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
### Configuration Management

---

## ğŸ¯ **Ø§Ù„Ù‡Ø¯Ù | Objective**
ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ØªÙƒÙˆÙŠÙ† Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆÙ…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Flutter Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.

## ğŸ“‹ **Rule | Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©**
**Arabic**: Ø¥Ø¯Ø§Ø±Ø© ØªÙƒÙˆÙŠÙ† Ù…ØªÙ‚Ø¯Ù…Ø© + Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨ÙŠØ¦Ø© Ù…Ø­Ø¯Ø¯Ø© + ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© + Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±  
**English**: Advanced configuration management + environment-specific settings + dynamic updates + secrets management

## ğŸ’¡ **Benefits | Ø§Ù„ÙÙˆØ§Ø¦Ø¯**
- **Environment Management | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ¦Ø§Øª**: Separate configurations for dev, staging, and production
- **Dynamic Updates | ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©**: Update configurations without app restarts
- **Security | Ø§Ù„Ø£Ù…Ø§Ù†**: Secure management of sensitive configuration data
- **Flexibility | Ø§Ù„Ù…Ø±ÙˆÙ†Ø©**: Easy configuration changes and feature toggles
- **Consistency | Ø§Ù„Ø§ØªØ³Ø§Ù‚**: Consistent configuration across all environments
- **Maintainability | Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©**: Centralized configuration management

## ğŸ› ï¸ **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ | Implementation**
- **Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ**: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØªÙƒÙˆÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Øª
- **ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**:
  - Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†
  - ØªØ·Ø¨ÙŠÙ‚ ØªÙƒÙˆÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø©
  - Ø¥Ø¶Ø§ÙØ© ØªØ­Ø¯ÙŠØ«Ø§Øª ØªÙƒÙˆÙŠÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
  - ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±
  - Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†
- **Ø§Ù„Ù†ØªÙŠØ¬Ø©**: Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ØªÙƒÙˆÙŠÙ† Ù‚ÙˆÙŠ ÙˆØ¢Ù…Ù†

## ğŸ¯ **Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© | Specific Priorities**

### **Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø®Ø§ØµØ© Ø¨Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Management Specific Priorities:**
#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø£Ø³Ø§Ø³ | Phase 1: Foundation**
- **ğŸ”´ Ø­Ø±Ø¬**: Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†
- **ğŸ”´ Ø­Ø±Ø¬**: ØªØ·Ø¨ÙŠÙ‚ ØªÙƒÙˆÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø©
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ø¶Ø§ÙØ© ØªØ­Ø¯ÙŠØ«Ø§Øª ØªÙƒÙˆÙŠÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 2: Enhancement**
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø§Øª ØªÙƒÙˆÙŠÙ† Ù…ØªÙ‚Ø¯Ù…Ø©

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 3: Optimization**
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: Ø¥Ø¯Ø§Ø±Ø© ØªÙƒÙˆÙŠÙ† Ù…ØªÙ‚Ø¯Ù…Ø©
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: ØªØ­Ø³ÙŠÙ† ØªÙƒÙˆÙŠÙ† Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
- **ğŸŸ¢ Ù…Ù†Ø®ÙØ¶**: Ø¥Ø¯Ø§Ø±Ø© ØªÙƒÙˆÙŠÙ† ØªÙ†Ø¨Ø¤ÙŠØ©

## ğŸ“ˆ **Success Metrics | Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­**

### **Ù…Ù‚Ø§ÙŠÙŠØ³ Ø®Ø§ØµØ© Ø¨Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Management Specific Metrics:**
- **ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Updates**: <30 seconds update time
- **Ø§ØªØ³Ø§Ù‚ Ø§Ù„Ø¨ÙŠØ¦Ø© | Environment Consistency**: 100% configuration consistency
- **Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ø£Ù…Ø§Ù† | Security Compliance**: 100% secure secrets management
- **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Validation**: 100% validation coverage
- **Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© | Dynamic Updates**: >95% successful updates
- **ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Documentation**: 100% documentation coverage

## âš ï¸ **Common Pitfalls & Best Practices | Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª**

### **Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø© Ø®Ø§ØµØ© Ø¨Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Management Specific Pitfalls:**
- **ØªØ¬Ù†Ø¨ | Avoid**: Ù‚ÙŠÙ… ØªÙƒÙˆÙŠÙ† Ù…ÙƒØªÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ Ø«Ø§Ø¨Øª
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ÙØµÙ„ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ø±Ø§Ø± ØºÙŠØ± Ø¢Ù…Ù†Ø©
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªÙƒÙˆÙŠÙ†

### **Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª | Best Practices:**
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: ØªÙƒÙˆÙŠÙ†Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ø±Ø§Ø± Ø¢Ù…Ù†Ø©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø´Ø§Ù…Ù„
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: ØªØ­Ø¯ÙŠØ«Ø§Øª ØªÙƒÙˆÙŠÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: ØªÙˆØ«ÙŠÙ‚ ØªÙƒÙˆÙŠÙ† Ù…ÙƒØªÙ…Ù„

## âš™ï¸ **Configuration Management System | Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†**

### **1. Configuration Service | Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†**
```dart
// lib/core/configuration/configuration_service.dart
class ConfigurationService {
  static final Map<String, dynamic> _config = {};
  static final Map<String, ConfigurationValidator> _validators = {};
  static final List<ConfigurationListener> _listeners = [];
  
  static Future<void> initialize() async {
    await _loadEnvironmentConfig();
    await _loadRemoteConfig();
    _setupConfigValidation();
    _setupConfigListeners();
  }
  
  static Future<void> _loadEnvironmentConfig() async {
    final environment = _getCurrentEnvironment();
    final configData = await _loadConfigFile('config_$environment.json');
    _config.addAll(configData);
  }
  
  static Future<void> _loadRemoteConfig() async {
    try {
      await FirebaseRemoteConfig.instance.fetchAndActivate();
      final remoteConfig = FirebaseRemoteConfig.instance.getAll();
      
      for (final entry in remoteConfig.entries) {
        if (entry.key.startsWith('config_')) {
          final configKey = entry.key.replaceFirst('config_', '');
          _config[configKey] = _parseConfigValue(entry.value);
        }
      }
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'remote_config_load');
    }
  }
  
  static void _setupConfigValidation() {
    _validators['api_base_url'] = UrlValidator();
    _validators['database_url'] = DatabaseUrlValidator();
    _validators['encryption_key'] = EncryptionKeyValidator();
    _validators['feature_flags'] = FeatureFlagValidator();
  }
  
  static void _setupConfigListeners() {
    FirebaseRemoteConfig.instance.onConfigUpdated.listen((_) {
      _loadRemoteConfig();
      _notifyListeners();
    });
  }
  
  static T get<T>(String key, {T? defaultValue}) {
    final value = _config[key];
    if (value is T) return value;
    if (defaultValue != null) return defaultValue;
    throw ConfigurationException('Configuration key "$key" not found');
  }
  
  static Future<void> set(String key, dynamic value) async {
    await _validateConfig(key, value);
    _config[key] = value;
    await _saveConfig(key, value);
    _notifyListeners();
  }
  
  static Future<void> _validateConfig(String key, dynamic value) async {
    final validator = _validators[key];
    if (validator != null) {
      await validator.validate(value);
    }
  }
  
  static Future<void> _saveConfig(String key, dynamic value) async {
    // Save to local storage
    await SecureStorageService.storeData('config_$key', json.encode(value));
  }
  
  static void addListener(ConfigurationListener listener) {
    _listeners.add(listener);
  }
  
  static void removeListener(ConfigurationListener listener) {
    _listeners.remove(listener);
  }
  
  static void _notifyListeners() {
    for (final listener in _listeners) {
      listener.onConfigurationChanged(_config);
    }
  }
  
  static String _getCurrentEnvironment() {
    const environment = String.fromEnvironment('ENVIRONMENT', defaultValue: 'development');
    return environment;
  }
  
  static Future<Map<String, dynamic>> _loadConfigFile(String fileName) async {
    try {
      final configString = await rootBundle.loadString('assets/config/$fileName');
      return json.decode(configString);
    } catch (e) {
      return {};
    }
  }
  
  static dynamic _parseConfigValue(RemoteConfigValue value) {
    switch (value.source) {
      case ValueSource.valueStatic:
        return value.asString();
      case ValueSource.valueDefault:
        return value.asString();
      case ValueSource.valueRemote:
        return value.asString();
    }
  }
}

abstract class ConfigurationValidator {
  Future<void> validate(dynamic value);
}

abstract class ConfigurationListener {
  void onConfigurationChanged(Map<String, dynamic> config);
}

class ConfigurationException implements Exception {
  final String message;
  ConfigurationException(this.message);
  
  @override
  String toString() => 'ConfigurationException: $message';
}
```

### **2. Environment Configuration | ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦Ø©**
```dart
// lib/core/configuration/environment_config.dart
class EnvironmentConfig {
  static const String development = 'development';
  static const String staging = 'staging';
  static const String production = 'production';
  
  static String get currentEnvironment {
    return const String.fromEnvironment('ENVIRONMENT', defaultValue: development);
  }
  
  static bool get isDevelopment => currentEnvironment == development;
  static bool get isStaging => currentEnvironment == staging;
  static bool get isProduction => currentEnvironment == production;
  
  static Map<String, dynamic> get environmentConfig {
    switch (currentEnvironment) {
      case development:
        return _developmentConfig;
      case staging:
        return _stagingConfig;
      case production:
        return _productionConfig;
      default:
        return _developmentConfig;
    }
  }
  
  static final Map<String, dynamic> _developmentConfig = {
    'api_base_url': 'https://api-dev.zahraah.com',
    'database_url': 'mongodb://localhost:27017/zahraah_dev',
    'encryption_key': 'dev_encryption_key_12345',
    'feature_flags': {
      'new_checkout_flow': true,
      'dark_mode': true,
      'social_login': false,
    },
    'logging_level': 'debug',
    'analytics_enabled': true,
    'crash_reporting_enabled': true,
  };
  
  static final Map<String, dynamic> _stagingConfig = {
    'api_base_url': 'https://api-staging.zahraah.com',
    'database_url': 'mongodb://staging-db:27017/zahraah_staging',
    'encryption_key': 'staging_encryption_key_67890',
    'feature_flags': {
      'new_checkout_flow': true,
      'dark_mode': true,
      'social_login': true,
    },
    'logging_level': 'info',
    'analytics_enabled': true,
    'crash_reporting_enabled': true,
  };
  
  static final Map<String, dynamic> _productionConfig = {
    'api_base_url': 'https://api.zahraah.com',
    'database_url': 'mongodb://prod-db:27017/zahraah_prod',
    'encryption_key': 'prod_encryption_key_abcdef',
    'feature_flags': {
      'new_checkout_flow': false,
      'dark_mode': true,
      'social_login': true,
    },
    'logging_level': 'error',
    'analytics_enabled': true,
    'crash_reporting_enabled': true,
  };
}
```

## ğŸ” **Secrets Management | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±**

### **1. Secrets Service | Ø®Ø¯Ù…Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±**
```dart
// lib/core/configuration/secrets_service.dart
class SecretsService {
  static final Map<String, String> _secrets = {};
  static final Map<String, SecretValidator> _validators = {};
  
  static Future<void> initialize() async {
    await _loadSecrets();
    _setupSecretValidation();
  }
  
  static Future<void> _loadSecrets() async {
    try {
      // Load secrets from secure storage
      final secretKeys = [
        'api_key',
        'database_password',
        'encryption_key',
        'jwt_secret',
        'payment_gateway_key',
      ];
      
      for (final key in secretKeys) {
        final secret = await SecureStorageService.getToken('secret_$key');
        if (secret != null) {
          _secrets[key] = secret;
        }
      }
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'secrets_load');
    }
  }
  
  static void _setupSecretValidation() {
    _validators['api_key'] = ApiKeyValidator();
    _validators['database_password'] = DatabasePasswordValidator();
    _validators['encryption_key'] = EncryptionKeyValidator();
    _validators['jwt_secret'] = JwtSecretValidator();
    _validators['payment_gateway_key'] = PaymentGatewayKeyValidator();
  }
  
  static String getSecret(String key) {
    final secret = _secrets[key];
    if (secret == null) {
      throw SecretNotFoundException('Secret "$key" not found');
    }
    return secret;
  }
  
  static Future<void> setSecret(String key, String value) async {
    await _validateSecret(key, value);
    _secrets[key] = value;
    await SecureStorageService.storeToken('secret_$key', value);
  }
  
  static Future<void> _validateSecret(String key, String value) async {
    final validator = _validators[key];
    if (validator != null) {
      await validator.validate(value);
    }
  }
  
  static bool hasSecret(String key) {
    return _secrets.containsKey(key);
  }
  
  static Future<void> rotateSecret(String key) async {
    final newSecret = await _generateNewSecret(key);
    await setSecret(key, newSecret);
  }
  
  static Future<String> _generateNewSecret(String key) async {
    // Generate new secret based on type
    switch (key) {
      case 'api_key':
        return _generateApiKey();
      case 'encryption_key':
        return _generateEncryptionKey();
      case 'jwt_secret':
        return _generateJwtSecret();
      default:
        return _generateRandomSecret();
    }
  }
  
  static String _generateApiKey() {
    return 'api_${_generateRandomString(32)}';
  }
  
  static String _generateEncryptionKey() {
    return _generateRandomString(64);
  }
  
  static String _generateJwtSecret() {
    return _generateRandomString(128);
  }
  
  static String _generateRandomSecret() {
    return _generateRandomString(32);
  }
  
  static String _generateRandomString(int length) {
    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    final random = Random();
    return String.fromCharCodes(
      Iterable.generate(length, (_) => chars.codeUnitAt(random.nextInt(chars.length))),
    );
  }
}

abstract class SecretValidator {
  Future<void> validate(String value);
}

class SecretNotFoundException implements Exception {
  final String message;
  SecretNotFoundException(this.message);
  
  @override
  String toString() => 'SecretNotFoundException: $message';
}

class ApiKeyValidator implements SecretValidator {
  @override
  Future<void> validate(String value) async {
    if (value.length < 16) {
      throw SecretValidationException('API key must be at least 16 characters long');
    }
  }
}

class DatabasePasswordValidator implements SecretValidator {
  @override
  Future<void> validate(String value) async {
    if (value.length < 8) {
      throw SecretValidationException('Database password must be at least 8 characters long');
    }
  }
}

class EncryptionKeyValidator implements SecretValidator {
  @override
  Future<void> validate(String value) async {
    if (value.length < 32) {
      throw SecretValidationException('Encryption key must be at least 32 characters long');
    }
  }
}

class JwtSecretValidator implements SecretValidator {
  @override
  Future<void> validate(String value) async {
    if (value.length < 64) {
      throw SecretValidationException('JWT secret must be at least 64 characters long');
    }
  }
}

class PaymentGatewayKeyValidator implements SecretValidator {
  @override
  Future<void> validate(String value) async {
    if (value.length < 24) {
      throw SecretValidationException('Payment gateway key must be at least 24 characters long');
    }
  }
}

class SecretValidationException implements Exception {
  final String message;
  SecretValidationException(this.message);
  
  @override
  String toString() => 'SecretValidationException: $message';
}
```

## ğŸ”„ **Dynamic Configuration Updates | ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©**

### **1. Dynamic Config Manager | Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ**
```dart
// lib/core/configuration/dynamic_config_manager.dart
class DynamicConfigManager {
  static final Map<String, dynamic> _pendingUpdates = {};
  static final List<ConfigUpdateListener> _listeners = [];
  static Timer? _updateTimer;
  
  static void initialize() {
    _startUpdateTimer();
    _setupRemoteConfigListener();
  }
  
  static void _startUpdateTimer() {
    _updateTimer = Timer.periodic(const Duration(minutes: 5), (timer) {
      _checkForUpdates();
    });
  }
  
  static void _setupRemoteConfigListener() {
    FirebaseRemoteConfig.instance.onConfigUpdated.listen((_) {
      _processRemoteConfigUpdates();
    });
  }
  
  static Future<void> _checkForUpdates() async {
    try {
      await FirebaseRemoteConfig.instance.fetchAndActivate();
      await _processRemoteConfigUpdates();
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'config_update_check');
    }
  }
  
  static Future<void> _processRemoteConfigUpdates() async {
    final remoteConfig = FirebaseRemoteConfig.instance.getAll();
    final updates = <String, dynamic>{};
    
    for (final entry in remoteConfig.entries) {
      if (entry.key.startsWith('config_')) {
        final configKey = entry.key.replaceFirst('config_', '');
        final newValue = _parseConfigValue(entry.value);
        final currentValue = ConfigurationService.get(configKey);
        
        if (newValue != currentValue) {
          updates[configKey] = newValue;
        }
      }
    }
    
    if (updates.isNotEmpty) {
      await _applyUpdates(updates);
    }
  }
  
  static Future<void> _applyUpdates(Map<String, dynamic> updates) async {
    for (final entry in updates.entries) {
      try {
        await ConfigurationService.set(entry.key, entry.value);
        await _notifyUpdate(entry.key, entry.value);
      } catch (e) {
        ErrorHandler.handleError(e, null, context: 'config_update_apply');
      }
    }
  }
  
  static Future<void> _notifyUpdate(String key, dynamic value) async {
    for (final listener in _listeners) {
      try {
        await listener.onConfigUpdated(key, value);
      } catch (e) {
        ErrorHandler.handleError(e, null, context: 'config_update_notify');
      }
    }
  }
  
  static void addUpdateListener(ConfigUpdateListener listener) {
    _listeners.add(listener);
  }
  
  static void removeUpdateListener(ConfigUpdateListener listener) {
    _listeners.remove(listener);
  }
  
  static dynamic _parseConfigValue(RemoteConfigValue value) {
    switch (value.source) {
      case ValueSource.valueStatic:
        return value.asString();
      case ValueSource.valueDefault:
        return value.asString();
      case ValueSource.valueRemote:
        return value.asString();
    }
  }
}

abstract class ConfigUpdateListener {
  Future<void> onConfigUpdated(String key, dynamic value);
}
```

## ğŸ“Š **Configuration Dashboard | Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªÙƒÙˆÙŠÙ†**

### **1. Configuration Dashboard | Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªÙƒÙˆÙŠÙ†**
```dart
// lib/features/configuration/presentation/pages/configuration_dashboard.dart
class ConfigurationDashboard extends StatefulWidget {
  const ConfigurationDashboard({super.key});
  
  @override
  State<ConfigurationDashboard> createState() => _ConfigurationDashboardState();
}

class _ConfigurationDashboardState extends State<ConfigurationDashboard> {
  Map<String, dynamic> _config = {};
  String _currentEnvironment = '';
  
  @override
  void initState() {
    super.initState();
    _loadConfiguration();
  }
  
  Future<void> _loadConfiguration() async {
    setState(() {
      _currentEnvironment = EnvironmentConfig.currentEnvironment;
      _config = ConfigurationService._config;
    });
  }
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Configuration Dashboard'),
        actions: [
          IconButton(
            icon: const Icon(Icons.refresh),
            onPressed: _loadConfiguration,
          ),
        ],
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            _buildEnvironmentInfo(),
            const SizedBox(height: 24),
            const Text(
              'Configuration Settings',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            _buildConfigurationList(),
            const SizedBox(height: 24),
            const Text(
              'Feature Flags',
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            _buildFeatureFlagsList(),
          ],
        ),
      ),
    );
  }
  
  Widget _buildEnvironmentInfo() {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'Environment Information',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 8),
            Text('Current Environment: $_currentEnvironment'),
            Text('API Base URL: ${_config['api_base_url'] ?? 'N/A'}'),
            Text('Database URL: ${_config['database_url'] ?? 'N/A'}'),
            Text('Logging Level: ${_config['logging_level'] ?? 'N/A'}'),
          ],
        ),
      ),
    );
  }
  
  Widget _buildConfigurationList() {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            _buildConfigItem('API Base URL', _config['api_base_url']),
            _buildConfigItem('Database URL', _config['database_url']),
            _buildConfigItem('Logging Level', _config['logging_level']),
            _buildConfigItem('Analytics Enabled', _config['analytics_enabled']),
            _buildConfigItem('Crash Reporting Enabled', _config['crash_reporting_enabled']),
          ],
        ),
      ),
    );
  }
  
  Widget _buildConfigItem(String key, dynamic value) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(key),
          Text(value?.toString() ?? 'N/A'),
        ],
      ),
    );
  }
  
  Widget _buildFeatureFlagsList() {
    final featureFlags = _config['feature_flags'] as Map<String, dynamic>? ?? {};
    
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            _buildFeatureFlagItem('New Checkout Flow', featureFlags['new_checkout_flow']),
            _buildFeatureFlagItem('Dark Mode', featureFlags['dark_mode']),
            _buildFeatureFlagItem('Social Login', featureFlags['social_login']),
          ],
        ),
      ),
    );
  }
  
  Widget _buildFeatureFlagItem(String name, dynamic value) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(name),
          Icon(
            value == true ? Icons.check_circle : Icons.cancel,
            color: value == true ? Colors.green : Colors.red,
          ),
        ],
      ),
    );
  }
}
```

## ğŸ“‹ **Implementation Checklist | Ù‚Ø§Ø¦Ù…Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ°**

### **1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Management**
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] ØªØ·Ø¨ÙŠÙ‚ ØªÙƒÙˆÙŠÙ†Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙƒÙˆÙŠÙ†

### **2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø± | Secrets Management**
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø®Ø¯Ù…Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±
- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø³Ø±Ø§Ø±
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø£Ø³Ø±Ø§Ø±
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø±

### **3. Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© | Dynamic Updates**
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
- [ ] Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¨Ø¹ÙŠØ¯
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©

### **4. Ù„ÙˆØ­Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† | Configuration Dashboard**
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø±Ø¶ Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù„ÙˆØ­Ø©

### **5. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØªØ­Ù‚Ù‚ | Security & Validation**
- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø³Ø±Ø§Ø±
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ¯Ø§Ø¨ÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù†
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ù…Ø§Ù†

---

**Next Tab**: Quality Management | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©
