# TAB 4: Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Notifications & Deep Links

## 19. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
### Notifications & Deep Links

---

## ğŸ¯ **Ø§Ù„Ù‡Ø¯Ù | Objective**
ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„ ÙˆÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ Flutter Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.

## ğŸ“‹ **Rule | Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©**
**Arabic**: Ø¬Ø¯ÙˆÙ„ Ø±ÙˆØ§Ø¨Ø· Ø¹Ù…ÙŠÙ‚Ø© ÙˆØ¥Ø´Ø¹Ø§Ø±Ø§Øª + Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª + Ø³Ù„ÙˆÙƒ Ø¹Ù†Ø¯ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª  
**English**: Deep links and notifications table + parameter handling + behavior when parameters missing

## ğŸ’¡ **Benefits | Ø§Ù„ÙÙˆØ§Ø¦Ø¯**
- **User Engagement | ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**: Keep users engaged with notifications
- **Seamless Navigation | ØªÙ†Ù‚Ù„ Ø³Ù„Ø³**: Direct users to specific content
- **Marketing | Ø§Ù„ØªØ³ÙˆÙŠÙ‚**: Promote products and offers effectively
- **User Experience | ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**: Smooth app experience with deep links
- **Retention | Ø§Ù„Ø§Ø­ØªÙØ§Ø¸**: Increase user retention with notifications
- **Conversion | Ø§Ù„ØªØ­ÙˆÙŠÙ„**: Drive conversions with targeted notifications

## ğŸ› ï¸ **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ | Implementation**
- **Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ**: Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„ØªÙ†Ù‚Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- **ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**:
  - Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
  - ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
  - Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  - Ø¥Ø¶Ø§ÙØ© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
  - ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- **Ø§Ù„Ù†ØªÙŠØ¬Ø©**: Ù†Ø¸Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ±ÙˆØ§Ø¨Ø· Ø¹Ù…ÙŠÙ‚Ø© Ø´Ø§Ù…Ù„

## ğŸ¯ **Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© | Specific Priorities**

### **Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Notifications & Deep Links Specific Priorities:**
#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø£Ø³Ø§Ø³ | Phase 1: Foundation**
- **ğŸ”´ Ø­Ø±Ø¬**: Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
- **ğŸ”´ Ø­Ø±Ø¬**: ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 2: Enhancement**
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ø¶Ø§ÙØ© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø§Øª Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 3: Optimization**
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: ØªØ®ØµÙŠØµ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: ØªØ­Ø³ÙŠÙ† Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
- **ğŸŸ¢ Ù…Ù†Ø®ÙØ¶**: ØªÙˆÙ‚ÙŠØª Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªÙ†Ø¨Ø¤ÙŠ

## ğŸ“ˆ **Success Metrics | Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­**

### **Ù…Ù‚Ø§ÙŠÙŠØ³ Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Notifications & Deep Links Specific Metrics:**
- **ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª | Notification Delivery**: >95% delivery rate
- **Ù†Ø¬Ø§Ø­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Deep Link Success**: >98% successful deep links
- **ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… | User Engagement**: >70% notification open rate
- **Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ | Conversion Rate**: >15% conversion from notifications
- **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª | Parameter Validation**: 100% parameter validation
- **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ | Error Handling**: <2% deep link errors

## âš ï¸ **Common Pitfalls & Best Practices | Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª**

### **Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Notifications & Deep Links Specific Pitfalls:**
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
- **ØªØ¬Ù†Ø¨ | Avoid**: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© Ø¶Ø¹ÙŠÙØ©
- **ØªØ¬Ù†Ø¨ | Avoid**: ØªØ®ØµÙŠØµ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± ÙƒØ§ÙÙŠ
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- **ØªØ¬Ù†Ø¨ | Avoid**: ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© Ø¶Ø¹ÙŠÙ

### **Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª | Best Practices:**
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø´Ø§Ù…Ù„
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© Ù‚ÙˆÙŠØ©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ù…Ø­ØªÙˆÙ‰ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø®ØµØµ
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø¬Ø¯ÙˆÙ„Ø© Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: ØªÙˆØ¬ÙŠÙ‡ Ø±ÙˆØ§Ø¨Ø· Ø¹Ù…ÙŠÙ‚Ø© Ù…ÙˆØ«ÙˆÙ‚

## ğŸ”” **Push Notifications | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©**

### **1. Notification Service | Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
```dart
// lib/core/notifications/notification_service.dart
class NotificationService {
  static final FirebaseMessaging _messaging = FirebaseMessaging.instance;
  
  static Future<void> initialize() async {
    // Request permission
    final settings = await _messaging.requestPermission(
      alert: true,
      badge: true,
      sound: true,
      provisional: false,
    );
    
    if (settings.authorizationStatus == AuthorizationStatus.authorized) {
      // Get FCM token
      final token = await _messaging.getToken();
      await _saveToken(token);
      
      // Set up message handlers
      _setupMessageHandlers();
    }
  }
  
  static Future<void> _saveToken(String? token) async {
    if (token != null) {
      await SecureStorageService.storeToken('fcm_token', token);
      
      // Send token to server
      await _sendTokenToServer(token);
    }
  }
  
  static Future<void> _sendTokenToServer(String token) async {
    try {
      final dio = await DioClient.instance;
      await dio.post('/notifications/token', data: {
        'token': token,
        'platform': Platform.isAndroid ? 'android' : 'ios',
        'user_id': await _getCurrentUserId(),
      });
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'send_fcm_token');
    }
  }
  
  static void _setupMessageHandlers() {
    // Handle foreground messages
    FirebaseMessaging.onMessage.listen(_handleForegroundMessage);
    
    // Handle background messages
    FirebaseMessaging.onBackgroundMessage(_handleBackgroundMessage);
    
    // Handle notification taps
    FirebaseMessaging.onMessageOpenedApp.listen(_handleNotificationTap);
  }
  
  static Future<void> _handleForegroundMessage(RemoteMessage message) async {
    // Show in-app notification
    await _showInAppNotification(message);
  }
  
  static Future<void> _handleBackgroundMessage(RemoteMessage message) async {
    // Handle background message
    await _processBackgroundMessage(message);
  }
  
  static Future<void> _handleNotificationTap(RemoteMessage message) async {
    // Handle notification tap
    await _processNotificationTap(message);
  }
  
  static Future<void> _showInAppNotification(RemoteMessage message) async {
    // Show in-app notification
    final notification = NotificationData.fromRemoteMessage(message);
    await InAppNotificationService.show(notification);
  }
  
  static Future<void> _processBackgroundMessage(RemoteMessage message) async {
    // Process background message
    final notification = NotificationData.fromRemoteMessage(message);
    await NotificationProcessor.process(notification);
  }
  
  static Future<void> _processNotificationTap(RemoteMessage message) async {
    // Process notification tap
    final notification = NotificationData.fromRemoteMessage(message);
    await DeepLinkService.handleNotification(notification);
  }
  
  static Future<String?> _getCurrentUserId() async {
    // Get current user ID
    return await SecureStorageService.getToken('user_id');
  }
}
```

### **2. Notification Data | Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±**
```dart
// lib/core/notifications/notification_data.dart
class NotificationData {
  final String id;
  final String title;
  final String body;
  final String? imageUrl;
  final Map<String, dynamic>? data;
  final NotificationType type;
  final DateTime timestamp;
  
  NotificationData({
    required this.id,
    required this.title,
    required this.body,
    this.imageUrl,
    this.data,
    required this.type,
    required this.timestamp,
  });
  
  factory NotificationData.fromRemoteMessage(RemoteMessage message) {
    return NotificationData(
      id: message.messageId ?? '',
      title: message.notification?.title ?? '',
      body: message.notification?.body ?? '',
      imageUrl: message.notification?.android?.imageUrl,
      data: message.data,
      type: _parseNotificationType(message.data['type']),
      timestamp: DateTime.now(),
    );
  }
  
  static NotificationType _parseNotificationType(String? type) {
    switch (type) {
      case 'product':
        return NotificationType.product;
      case 'order':
        return NotificationType.order;
      case 'promotion':
        return NotificationType.promotion;
      case 'general':
        return NotificationType.general;
      default:
        return NotificationType.general;
    }
  }
}

enum NotificationType {
  product,
  order,
  promotion,
  general,
}
```

## ğŸ”— **Deep Links | Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©**

### **1. Deep Link Service | Ø®Ø¯Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©**
```dart
// lib/core/deep_links/deep_link_service.dart
class DeepLinkService {
  static final Map<String, DeepLinkHandler> _handlers = {};
  
  static void initialize() {
    _registerHandlers();
    _setupLinkStreams();
  }
  
  static void _registerHandlers() {
    _handlers['product'] = ProductDeepLinkHandler();
    _handlers['order'] = OrderDeepLinkHandler();
    _handlers['category'] = CategoryDeepLinkHandler();
    _handlers['promotion'] = PromotionDeepLinkHandler();
    _handlers['profile'] = ProfileDeepLinkHandler();
  }
  
  static void _setupLinkStreams() {
    // Handle app links
    FirebaseDynamicLinks.instance.onLink.listen(_handleDynamicLink);
    
    // Handle initial link
    FirebaseDynamicLinks.instance.getInitialLink().then(_handleDynamicLink);
  }
  
  static Future<void> _handleDynamicLink(PendingDynamicLinkData? data) async {
    if (data?.link != null) {
      await handleDeepLink(data!.link.toString());
    }
  }
  
  static Future<void> handleDeepLink(String link) async {
    try {
      final uri = Uri.parse(link);
      final path = uri.path;
      final segments = path.split('/').where((s) => s.isNotEmpty).toList();
      
      if (segments.isEmpty) {
        await _handleHomeLink();
        return;
      }
      
      final handlerType = segments[0];
      final handler = _handlers[handlerType];
      
      if (handler != null) {
        await handler.handle(segments, uri.queryParameters);
      } else {
        await _handleUnknownLink(link);
      }
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'deep_link_handling');
    }
  }
  
  static Future<void> _handleHomeLink() async {
    AppRouter.router.go('/');
  }
  
  static Future<void> _handleUnknownLink(String link) async {
    // Handle unknown deep link
    AppRouter.router.go('/');
  }
  
  static Future<void> handleNotification(NotificationData notification) async {
    if (notification.data != null) {
      final link = notification.data!['deep_link'];
      if (link != null) {
        await handleDeepLink(link);
      }
    }
  }
}
```

### **2. Deep Link Handlers | Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©**
```dart
// lib/core/deep_links/handlers/product_deep_link_handler.dart
class ProductDeepLinkHandler implements DeepLinkHandler {
  @override
  Future<void> handle(List<String> segments, Map<String, String> parameters) async {
    if (segments.length < 2) {
      await _handleMissingProductId();
      return;
    }
    
    final productId = segments[1];
    
    if (productId.isEmpty) {
      await _handleMissingProductId();
      return;
    }
    
    // Validate product ID
    if (!_isValidProductId(productId)) {
      await _handleInvalidProductId(productId);
      return;
    }
    
    // Navigate to product page
    AppRouter.router.go('/products/$productId');
  }
  
  Future<void> _handleMissingProductId() async {
    // Handle missing product ID
    AppRouter.router.go('/products');
  }
  
  Future<void> _handleInvalidProductId(String productId) async {
    // Handle invalid product ID
    AppRouter.router.go('/products');
  }
  
  bool _isValidProductId(String productId) {
    // Validate product ID format
    return productId.isNotEmpty && productId.length > 0;
  }
}

// lib/core/deep_links/handlers/order_deep_link_handler.dart
class OrderDeepLinkHandler implements DeepLinkHandler {
  @override
  Future<void> handle(List<String> segments, Map<String, String> parameters) async {
    if (segments.length < 2) {
      await _handleMissingOrderId();
      return;
    }
    
    final orderId = segments[1];
    
    if (orderId.isEmpty) {
      await _handleMissingOrderId();
      return;
    }
    
    // Validate order ID
    if (!_isValidOrderId(orderId)) {
      await _handleInvalidOrderId(orderId);
      return;
    }
    
    // Navigate to order page
    AppRouter.router.go('/orders/$orderId');
  }
  
  Future<void> _handleMissingOrderId() async {
    // Handle missing order ID
    AppRouter.router.go('/orders');
  }
  
  Future<void> _handleInvalidOrderId(String orderId) async {
    // Handle invalid order ID
    AppRouter.router.go('/orders');
  }
  
  bool _isValidOrderId(String orderId) {
    // Validate order ID format
    return orderId.isNotEmpty && orderId.length > 0;
  }
}

abstract class DeepLinkHandler {
  Future<void> handle(List<String> segments, Map<String, String> parameters);
}
```

## ğŸ“‹ **Deep Link Table | Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©**

### **1. Deep Link Configuration | ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©**
```dart
// lib/core/deep_links/deep_link_config.dart
class DeepLinkConfig {
  static const Map<String, DeepLinkInfo> deepLinkMap = {
    'product': DeepLinkInfo(
      pattern: '/product/{id}',
      requiredParams: ['id'],
      optionalParams: [],
      fallbackRoute: '/products',
      validation: ProductValidation(),
    ),
    'order': DeepLinkInfo(
      pattern: '/order/{id}',
      requiredParams: ['id'],
      optionalParams: [],
      fallbackRoute: '/orders',
      validation: OrderValidation(),
    ),
    'category': DeepLinkInfo(
      pattern: '/category/{id}',
      requiredParams: ['id'],
      optionalParams: ['page', 'sort'],
      fallbackRoute: '/products',
      validation: CategoryValidation(),
    ),
    'promotion': DeepLinkInfo(
      pattern: '/promotion/{id}',
      requiredParams: ['id'],
      optionalParams: [],
      fallbackRoute: '/promotions',
      validation: PromotionValidation(),
    ),
    'profile': DeepLinkInfo(
      pattern: '/profile/{section}',
      requiredParams: ['section'],
      optionalParams: [],
      fallbackRoute: '/profile',
      validation: ProfileValidation(),
    ),
  };
}

class DeepLinkInfo {
  final String pattern;
  final List<String> requiredParams;
  final List<String> optionalParams;
  final String fallbackRoute;
  final DeepLinkValidation validation;
  
  DeepLinkInfo({
    required this.pattern,
    required this.requiredParams,
    required this.optionalParams,
    required this.fallbackRoute,
    required this.validation,
  });
}

abstract class DeepLinkValidation {
  bool validate(String value);
}

class ProductValidation implements DeepLinkValidation {
  @override
  bool validate(String value) {
    return value.isNotEmpty && value.length > 0;
  }
}

class OrderValidation implements DeepLinkValidation {
  @override
  bool validate(String value) {
    return value.isNotEmpty && value.length > 0;
  }
}

class CategoryValidation implements DeepLinkValidation {
  @override
  bool validate(String value) {
    return value.isNotEmpty && value.length > 0;
  }
}

class PromotionValidation implements DeepLinkValidation {
  @override
  bool validate(String value) {
    return value.isNotEmpty && value.length > 0;
  }
}

class ProfileValidation implements DeepLinkValidation {
  @override
  bool validate(String value) {
    return ['settings', 'orders', 'favorites', 'addresses'].contains(value);
  }
}
```

## ğŸ“… **Notification Scheduling | Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**

### **1. Notification Scheduler | Ù…Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
```dart
// lib/core/notifications/notification_scheduler.dart
class NotificationScheduler {
  static Future<void> scheduleNotification({
    required String title,
    required String body,
    required DateTime scheduledTime,
    required NotificationType type,
    Map<String, dynamic>? data,
  }) async {
    try {
      final notification = NotificationData(
        id: _generateNotificationId(),
        title: title,
        body: body,
        data: data,
        type: type,
        timestamp: scheduledTime,
      );
      
      await _scheduleLocalNotification(notification);
      await _scheduleServerNotification(notification);
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'notification_scheduling');
    }
  }
  
  static Future<void> _scheduleLocalNotification(NotificationData notification) async {
    // Schedule local notification
    await LocalNotificationService.schedule(
      notification.id,
      notification.title,
      notification.body,
      notification.timestamp,
    );
  }
  
  static Future<void> _scheduleServerNotification(NotificationData notification) async {
    // Schedule server notification
    final dio = await DioClient.instance;
    await dio.post('/notifications/schedule', data: {
      'notification': notification.toJson(),
    });
  }
  
  static String _generateNotificationId() {
    return 'notification_${DateTime.now().millisecondsSinceEpoch}';
  }
}
```

### **2. Notification Templates | Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
```dart
// lib/core/notifications/notification_templates.dart
class NotificationTemplates {
  static NotificationTemplate getProductNotification({
    required String productName,
    required String productId,
    required double discount,
  }) {
    return NotificationTemplate(
      title: 'Ø®ØµÙ… Ø®Ø§Øµ Ø¹Ù„Ù‰ $productName',
      body: 'Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… ${discount.toStringAsFixed(0)}% Ø¹Ù„Ù‰ $productName',
      type: NotificationType.product,
      data: {
        'product_id': productId,
        'discount': discount,
        'deep_link': '/product/$productId',
      },
    );
  }
  
  static NotificationTemplate getOrderNotification({
    required String orderId,
    required String status,
  }) {
    return NotificationTemplate(
      title: 'ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨',
      body: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ùƒ #$orderId Ø¥Ù„Ù‰ $status',
      type: NotificationType.order,
      data: {
        'order_id': orderId,
        'status': status,
        'deep_link': '/order/$orderId',
      },
    );
  }
  
  static NotificationTemplate getPromotionNotification({
    required String promotionTitle,
    required String promotionId,
    required DateTime expiryDate,
  }) {
    return NotificationTemplate(
      title: 'Ø¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯',
      body: '$promotionTitle - ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ ${expiryDate.toString().split(' ')[0]}',
      type: NotificationType.promotion,
      data: {
        'promotion_id': promotionId,
        'expiry_date': expiryDate.toIso8601String(),
        'deep_link': '/promotion/$promotionId',
      },
    );
  }
}

class NotificationTemplate {
  final String title;
  final String body;
  final NotificationType type;
  final Map<String, dynamic> data;
  
  NotificationTemplate({
    required this.title,
    required this.body,
    required this.type,
    required this.data,
  });
}
```

## ğŸ“Š **Notification Analytics | ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**

### **1. Notification Analytics | ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
```dart
// lib/core/notifications/notification_analytics.dart
class NotificationAnalytics {
  static Future<void> trackNotificationSent(NotificationData notification) async {
    await AnalyticsService.logEvent('notification_sent', {
      'notification_id': notification.id,
      'notification_type': notification.type.name,
      'title': notification.title,
      'timestamp': notification.timestamp.toIso8601String(),
    });
  }
  
  static Future<void> trackNotificationOpened(NotificationData notification) async {
    await AnalyticsService.logEvent('notification_opened', {
      'notification_id': notification.id,
      'notification_type': notification.type.name,
      'title': notification.title,
      'timestamp': DateTime.now().toIso8601String(),
    });
  }
  
  static Future<void> trackNotificationDismissed(NotificationData notification) async {
    await AnalyticsService.logEvent('notification_dismissed', {
      'notification_id': notification.id,
      'notification_type': notification.type.name,
      'title': notification.title,
      'timestamp': DateTime.now().toIso8601String(),
    });
  }
  
  static Future<void> trackDeepLinkOpened(String deepLink) async {
    await AnalyticsService.logEvent('deep_link_opened', {
      'deep_link': deepLink,
      'timestamp': DateTime.now().toIso8601String(),
    });
  }
  
  static Future<void> trackDeepLinkError(String deepLink, String error) async {
    await AnalyticsService.logEvent('deep_link_error', {
      'deep_link': deepLink,
      'error': error,
      'timestamp': DateTime.now().toIso8601String(),
    });
  }
}
```

## ğŸ“‹ **Implementation Checklist | Ù‚Ø§Ø¦Ù…Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ°**

### **1. Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ© | Push Notifications**
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Cloud Messaging
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Ø¥Ø¶Ø§ÙØ© Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

### **2. Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© | Deep Links**
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø¯Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©

### **3. Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª | Notification Scheduling**
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Ø¥Ø¶Ø§ÙØ© Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

### **4. Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª | Analytics**
- [ ] Ø¥Ø¶Ø§ÙØ© ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ ØªØªØ¨Ø¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª

### **5. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ | Error Handling**
- [ ] Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¢Ù„ÙŠØ§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

---

**Next Tab**: Business Analytics | Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©
