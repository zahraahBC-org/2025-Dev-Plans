# TAB 3: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Monitoring

## 18. Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª
### Performance Monitoring

---

## ğŸ¯ **Ø§Ù„Ù‡Ø¯Ù | Objective**
ØªØ·Ø¨ÙŠÙ‚ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ Ø´Ø§Ù…Ù„Ø© Ù…Ø¹ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª ÙˆÙ…Ù‚Ø§ÙŠÙŠØ³ Ù…ÙØµÙ„Ø© Ù„ØªØ·Ø¨ÙŠÙ‚ Flutter Ù„Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.

## ğŸ“‹ **Rule | Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©**
**Arabic**: Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø£Ø¯Ø§Ø¡ Ù…ÙˆØ³Ù‘Ø¹Ø© + TTI â‰¤ 2.5s + Jank < 1% + AAB â‰¤ 40MB  
**English**: Extended performance budgets + TTI â‰¤ 2.5s + Jank < 1% + AAB â‰¤ 40MB

## ğŸ’¡ **Benefits | Ø§Ù„ÙÙˆØ§Ø¦Ø¯**
- **Performance Visibility | Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ø¯Ø§Ø¡**: Clear visibility into app performance
- **Proactive Optimization | ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ¨Ø§Ù‚ÙŠ**: Identify issues before they impact users
- **Budget Compliance | Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù„Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©**: Ensure app stays within performance limits
- **User Experience | ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**: Maintain smooth, responsive app experience
- **Resource Management | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯**: Optimize resource usage and costs
- **Quality Assurance | Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©**: Maintain high performance standards

## ğŸ› ï¸ **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ | Implementation**
- **Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ**: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø­Ø±Ø¬Ø© Ù„Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- **ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**:
  - Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
  - ØªØ­Ø¯ÙŠØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª ÙˆÙ…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø£Ø¯Ø§Ø¡
  - ØªØ·Ø¨ÙŠÙ‚ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
  - Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
  - Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø§Øª Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
- **Ø§Ù„Ù†ØªÙŠØ¬Ø©**: Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ Ø´Ø§Ù…Ù„

## ğŸ¯ **Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© | Specific Priorities**

### **Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø®Ø§ØµØ© Ø¨Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Monitoring Specific Priorities:**
#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø£Ø³Ø§Ø³ | Phase 1: Foundation**
- **ğŸ”´ Ø­Ø±Ø¬**: Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
- **ğŸ”´ Ø­Ø±Ø¬**: ØªØ­Ø¯ÙŠØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª ÙˆÙ…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø£Ø¯Ø§Ø¡
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: ØªØ·Ø¨ÙŠÙ‚ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 2: Enhancement**
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- **ğŸŸ  Ø¹Ø§Ù„ÙŠ**: Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø§Øª Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: Ø¥Ø¶Ø§ÙØ© ØªØ­Ù„ÙŠÙ„Ø§Øª Ø£Ø¯Ø§Ø¡ Ù…ØªÙ‚Ø¯Ù…Ø©

#### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„ØªØ­Ø³ÙŠÙ† | Phase 3: Optimization**
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ù…ØªÙ‚Ø¯Ù…
- **ğŸŸ¡ Ù…ØªÙˆØ³Ø·**: Ø±Ø¤Ù‰ Ø£Ø¯Ø§Ø¡ Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
- **ğŸŸ¢ Ù…Ù†Ø®ÙØ¶**: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ ØªÙ†Ø¨Ø¤ÙŠØ©

## ğŸ“ˆ **Success Metrics | Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­**

### **Ù…Ù‚Ø§ÙŠÙŠØ³ Ø®Ø§ØµØ© Ø¨Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Monitoring Specific Metrics:**
- **TTI (ÙˆÙ‚Øª Ø§Ù„ØªÙØ§Ø¹Ù„) | Time to Interactive**: â‰¤2.5s
- **Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙ‚Ø·Ø¹ | Jank Rate**: <1% frame drops
- **Ø­Ø¬Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ | App Size**: â‰¤40MB AAB size
- **Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø© | Memory Usage**: <200MB peak memory
- **Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ© | Battery Usage**: <5% per hour
- **Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Budget**: 100% compliance

## âš ï¸ **Common Pitfalls & Best Practices | Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª**

### **Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø© Ø®Ø§ØµØ© Ø¨Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Monitoring Specific Pitfalls:**
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª ÙˆØ¹ØªØ¨Ø§Øª Ø£Ø¯Ø§Ø¡
- **ØªØ¬Ù†Ø¨ | Avoid**: ØªØºØ·ÙŠØ© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ ØºÙŠØ± ÙƒØ§ÙÙŠØ©
- **ØªØ¬Ù†Ø¨ | Avoid**: ØªÙ†Ø¨ÙŠÙ‡ ÙˆØ¥Ø´Ø¹Ø§Ø± Ø£Ø¯Ø§Ø¡ Ø¶Ø¹ÙŠÙ
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
- **ØªØ¬Ù†Ø¨ | Avoid**: Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø¯Ø§Ø¡ ØºÙŠØ± ÙƒØ§ÙÙŠ

### **Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª | Best Practices:**
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø£Ø¯Ø§Ø¡ Ø´Ø§Ù…Ù„Ø©
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: ØªÙ†Ø¨ÙŠÙ‡ Ø£Ø¯Ø§Ø¡ Ø§Ø³ØªØ¨Ø§Ù‚ÙŠ
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
- **Ø§Ø³ØªØ®Ø¯Ù… | Use**: Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø¯Ø§Ø¡ Ù…Ø³ØªÙ…Ø±

## ğŸ“Š **Performance Budgets | Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡**

### **1. Performance Budget Definition | ØªØ¹Ø±ÙŠÙ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø£Ø¯Ø§Ø¡**
```dart
// lib/core/performance/performance_budgets.dart
class PerformanceBudgets {
  // App Startup Performance
  static const Duration coldStartBudget = Duration(milliseconds: 2500);
  static const Duration warmStartBudget = Duration(milliseconds: 1000);
  static const Duration hotStartBudget = Duration(milliseconds: 500);
  
  // App Size Budgets
  static const int apkSizeBudget = 50 * 1024 * 1024; // 50MB
  static const int aabSizeBudget = 40 * 1024 * 1024; // 40MB
  static const int bundleSizeBudget = 30 * 1024 * 1024; // 30MB
  
  // Memory Budgets
  static const int peakMemoryBudget = 200 * 1024 * 1024; // 200MB
  static const int averageMemoryBudget = 150 * 1024 * 1024; // 150MB
  
  // Frame Rate Budgets
  static const double targetFrameRate = 60.0; // 60 FPS
  static const double minimumFrameRate = 55.0; // 55 FPS
  static const double jankThreshold = 0.01; // 1% jank
  
  // Network Performance Budgets
  static const Duration apiResponseBudget = Duration(milliseconds: 1000);
  static const Duration imageLoadBudget = Duration(milliseconds: 2000);
  static const Duration pageLoadBudget = Duration(milliseconds: 3000);
  
  // Battery Usage Budgets
  static const double batteryUsagePerHour = 5.0; // 5% per hour
  static const double batteryUsagePerSession = 2.0; // 2% per session
  
  // CPU Usage Budgets
  static const double cpuUsageBudget = 80.0; // 80% CPU usage
  static const double cpuUsagePeakBudget = 95.0; // 95% peak CPU usage
}
```

### **2. Performance Metrics | Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø£Ø¯Ø§Ø¡**
```dart
// lib/core/performance/performance_metrics.dart
class PerformanceMetrics {
  static final Map<String, PerformanceMetric> _metrics = {};
  
  static void recordMetric(String name, double value, {
    String? unit,
    Map<String, dynamic>? metadata,
  }) {
    _metrics[name] = PerformanceMetric(
      name: name,
      value: value,
      unit: unit ?? 'ms',
      timestamp: DateTime.now(),
      metadata: metadata ?? {},
    );
    
    // Check against budget
    _checkBudget(name, value);
    
    // Send to analytics
    AnalyticsService.logEvent('performance_metric', {
      'metric_name': name,
      'value': value,
      'unit': unit ?? 'ms',
      'metadata': metadata ?? {},
    });
  }
  
  static void _checkBudget(String name, double value) {
    switch (name) {
      case 'cold_start_time':
        if (value > PerformanceBudgets.coldStartBudget.inMilliseconds) {
          _triggerAlert('cold_start_exceeded', value);
        }
        break;
      case 'memory_usage':
        if (value > PerformanceBudgets.peakMemoryBudget) {
          _triggerAlert('memory_exceeded', value);
        }
        break;
      case 'frame_rate':
        if (value < PerformanceBudgets.minimumFrameRate) {
          _triggerAlert('frame_rate_low', value);
        }
        break;
      case 'jank_rate':
        if (value > PerformanceBudgets.jankThreshold) {
          _triggerAlert('jank_exceeded', value);
        }
        break;
    }
  }
  
  static void _triggerAlert(String alertType, double value) {
    AlertManager.sendAlert(
      type: alertType,
      message: 'Performance budget exceeded: $alertType = $value',
      severity: 'medium',
      data: {'value': value, 'timestamp': DateTime.now().toIso8601String()},
    );
  }
  
  static Map<String, PerformanceMetric> getMetrics() {
    return Map.from(_metrics);
  }
  
  static void clearMetrics() {
    _metrics.clear();
  }
}

class PerformanceMetric {
  final String name;
  final double value;
  final String unit;
  final DateTime timestamp;
  final Map<String, dynamic> metadata;
  
  PerformanceMetric({
    required this.name,
    required this.value,
    required this.unit,
    required this.timestamp,
    required this.metadata,
  });
}
```

## â±ï¸ **Performance Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡**

### **1. App Startup Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**
```dart
// lib/core/performance/startup_monitor.dart
class StartupMonitor {
  static DateTime? _appStartTime;
  static DateTime? _firstFrameTime;
  static DateTime? _interactiveTime;
  
  static void startMonitoring() {
    _appStartTime = DateTime.now();
    
    // Monitor first frame
    WidgetsBinding.instance.addPostFrameCallback((_) {
      _firstFrameTime = DateTime.now();
      _recordFirstFrameTime();
    });
    
    // Monitor interactive time
    _monitorInteractiveTime();
  }
  
  static void _recordFirstFrameTime() {
    if (_appStartTime != null && _firstFrameTime != null) {
      final firstFrameDuration = _firstFrameTime!.difference(_appStartTime!);
      PerformanceMetrics.recordMetric(
        'first_frame_time',
        firstFrameDuration.inMilliseconds.toDouble(),
        unit: 'ms',
      );
    }
  }
  
  static void _monitorInteractiveTime() {
    // Monitor when app becomes interactive
    Timer.periodic(const Duration(milliseconds: 100), (timer) {
      if (_isAppInteractive()) {
        _interactiveTime = DateTime.now();
        _recordInteractiveTime();
        timer.cancel();
      }
    });
  }
  
  static bool _isAppInteractive() {
    // Check if app is interactive (e.g., user can interact with UI)
    return true; // Simplified implementation
  }
  
  static void _recordInteractiveTime() {
    if (_appStartTime != null && _interactiveTime != null) {
      final interactiveDuration = _interactiveTime!.difference(_appStartTime!);
      PerformanceMetrics.recordMetric(
        'time_to_interactive',
        interactiveDuration.inMilliseconds.toDouble(),
        unit: 'ms',
      );
    }
  }
}
```

### **2. Memory Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©**
```dart
// lib/core/performance/memory_monitor.dart
class MemoryMonitor {
  static Timer? _memoryTimer;
  static final List<double> _memoryHistory = [];
  
  static void startMonitoring() {
    _memoryTimer = Timer.periodic(const Duration(seconds: 30), (timer) {
      _checkMemoryUsage();
    });
  }
  
  static void stopMonitoring() {
    _memoryTimer?.cancel();
  }
  
  static void _checkMemoryUsage() {
    final memoryUsage = ProcessInfo.currentRss;
    final memoryUsageMB = memoryUsage / 1024 / 1024;
    
    _memoryHistory.add(memoryUsageMB);
    
    // Keep only last 100 measurements
    if (_memoryHistory.length > 100) {
      _memoryHistory.removeAt(0);
    }
    
    PerformanceMetrics.recordMetric(
      'memory_usage',
      memoryUsageMB,
      unit: 'MB',
      metadata: {
        'peak_memory': _memoryHistory.reduce((a, b) => a > b ? a : b),
        'average_memory': _memoryHistory.reduce((a, b) => a + b) / _memoryHistory.length,
      },
    );
    
    // Check for memory leaks
    _checkMemoryLeaks();
  }
  
  static void _checkMemoryLeaks() {
    if (_memoryHistory.length < 10) return;
    
    final recent = _memoryHistory.takeLast(10);
    final older = _memoryHistory.take(10);
    
    final recentAvg = recent.reduce((a, b) => a + b) / recent.length;
    final olderAvg = older.reduce((a, b) => a + b) / older.length;
    
    // Check if memory usage is consistently increasing
    if (recentAvg > olderAvg * 1.2) {
      AlertManager.sendAlert(
        type: 'memory_leak_detected',
        message: 'Potential memory leak detected: ${recentAvg.toStringAsFixed(2)}MB vs ${olderAvg.toStringAsFixed(2)}MB',
        severity: 'high',
        data: {
          'recent_average': recentAvg,
          'older_average': olderAvg,
        },
      );
    }
  }
}
```

## ğŸ¯ **Frame Rate Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª**

### **1. Frame Rate Tracker | Ù…ØªØªØ¨Ø¹ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª**
```dart
// lib/core/performance/frame_rate_monitor.dart
class FrameRateMonitor {
  static final List<Duration> _frameDurations = [];
  static DateTime? _lastFrameTime;
  static Timer? _frameTimer;
  
  static void startMonitoring() {
    _frameTimer = Timer.periodic(const Duration(milliseconds: 16), (timer) {
      _recordFrame();
    });
  }
  
  static void stopMonitoring() {
    _frameTimer?.cancel();
  }
  
  static void _recordFrame() {
    final now = DateTime.now();
    
    if (_lastFrameTime != null) {
      final frameDuration = now.difference(_lastFrameTime!);
      _frameDurations.add(frameDuration);
      
      // Keep only last 1000 frames
      if (_frameDurations.length > 1000) {
        _frameDurations.removeAt(0);
      }
      
      // Calculate frame rate every 60 frames
      if (_frameDurations.length % 60 == 0) {
        _calculateFrameRate();
      }
    }
    
    _lastFrameTime = now;
  }
  
  static void _calculateFrameRate() {
    if (_frameDurations.length < 60) return;
    
    final recentFrames = _frameDurations.takeLast(60);
    final averageFrameDuration = recentFrames.reduce((a, b) => a + b) / recentFrames.length;
    final frameRate = 1000 / averageFrameDuration.inMilliseconds;
    
    PerformanceMetrics.recordMetric(
      'frame_rate',
      frameRate,
      unit: 'fps',
      metadata: {
        'average_frame_duration': averageFrameDuration.inMilliseconds,
        'jank_count': _countJankFrames(recentFrames),
      },
    );
  }
  
  static int _countJankFrames(Iterable<Duration> frames) {
    return frames.where((frame) => frame.inMilliseconds > 16).length;
  }
}
```

### **2. Jank Detection | ÙƒØ´Ù Ø§Ù„ØªÙˆÙ‚Ù**
```dart
// lib/core/performance/jank_detector.dart
class JankDetector {
  static void detectJank() {
    // Use Flutter's frame callback to detect jank
    WidgetsBinding.instance.addPersistentFrameCallback((timeStamp) {
      _analyzeFrame(timeStamp);
    });
  }
  
  static void _analyzeFrame(Duration timeStamp) {
    // Analyze frame timing for jank detection
    final frameDuration = timeStamp.inMilliseconds;
    
    if (frameDuration > 16) { // More than 16ms is considered jank
      PerformanceMetrics.recordMetric(
        'jank_frame',
        frameDuration.toDouble(),
        unit: 'ms',
        metadata: {
          'timestamp': timeStamp.inMilliseconds,
          'is_jank': true,
        },
      );
    }
  }
}
```

## ğŸ“± **App Size Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø¬Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**

### **1. Size Tracker | Ù…ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø¬Ù…**
```dart
// lib/core/performance/size_monitor.dart
class SizeMonitor {
  static Future<void> checkAppSize() async {
    try {
      // Check APK size
      final apkSize = await _getApkSize();
      PerformanceMetrics.recordMetric(
        'apk_size',
        apkSize.toDouble(),
        unit: 'bytes',
        metadata: {'size_mb': apkSize / (1024 * 1024)},
      );
      
      // Check AAB size
      final aabSize = await _getAabSize();
      PerformanceMetrics.recordMetric(
        'aab_size',
        aabSize.toDouble(),
        unit: 'bytes',
        metadata: {'size_mb': aabSize / (1024 * 1024)},
      );
      
      // Check bundle size
      final bundleSize = await _getBundleSize();
      PerformanceMetrics.recordMetric(
        'bundle_size',
        bundleSize.toDouble(),
        unit: 'bytes',
        metadata: {'size_mb': bundleSize / (1024 * 1024)},
      );
      
    } catch (e) {
      ErrorHandler.handleError(e, null, context: 'size_monitoring');
    }
  }
  
  static Future<int> _getApkSize() async {
    // Get APK size from package info
    final packageInfo = await PackageInfo.fromPlatform();
    // Implementation depends on platform
    return 0;
  }
  
  static Future<int> _getAabSize() async {
    // Get AAB size
    return 0;
  }
  
  static Future<int> _getBundleSize() async {
    // Get bundle size
    return 0;
  }
}
```

## ğŸ”‹ **Battery Monitoring | Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©**

### **1. Battery Tracker | Ù…ØªØªØ¨Ø¹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©**
```dart
// lib/core/performance/battery_monitor.dart
class BatteryMonitor {
  static Timer? _batteryTimer;
  static double? _initialBatteryLevel;
  static DateTime? _startTime;
  
  static void startMonitoring() async {
    _initialBatteryLevel = await _getBatteryLevel();
    _startTime = DateTime.now();
    
    _batteryTimer = Timer.periodic(const Duration(minutes: 5), (timer) {
      _checkBatteryUsage();
    });
  }
  
  static void stopMonitoring() {
    _batteryTimer?.cancel();
  }
  
  static void _checkBatteryUsage() async {
    final currentBatteryLevel = await _getBatteryLevel();
    
    if (_initialBatteryLevel != null && _startTime != null) {
      final batteryDrain = _initialBatteryLevel! - currentBatteryLevel;
      final timeElapsed = DateTime.now().difference(_startTime!);
      final batteryPerHour = batteryDrain / (timeElapsed.inHours + 1);
      
      PerformanceMetrics.recordMetric(
        'battery_usage_per_hour',
        batteryPerHour,
        unit: '%',
        metadata: {
          'initial_level': _initialBatteryLevel,
          'current_level': currentBatteryLevel,
          'time_elapsed_hours': timeElapsed.inHours,
        },
      );
      
      // Check against budget
      if (batteryPerHour > PerformanceBudgets.batteryUsagePerHour) {
        AlertManager.sendAlert(
          type: 'high_battery_usage',
          message: 'High battery usage detected: ${batteryPerHour.toStringAsFixed(2)}% per hour',
          severity: 'medium',
          data: {'battery_per_hour': batteryPerHour},
        );
      }
    }
  }
  
  static Future<double> _getBatteryLevel() async {
    // Get battery level from platform
    return 100.0; // Simplified implementation
  }
}
```

## ğŸ“Š **Performance Dashboard | Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡**

### **1. Performance Dashboard | Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡**
```dart
// lib/features/performance/presentation/pages/performance_dashboard.dart
class PerformanceDashboard extends StatelessWidget {
  const PerformanceDashboard({super.key});
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Performance Dashboard'),
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'Performance Metrics',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            _buildMetricsGrid(),
            const SizedBox(height: 24),
            const Text(
              'Performance Budgets',
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            _buildBudgetStatus(),
            const SizedBox(height: 24),
            const Text(
              'Performance History',
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            _buildPerformanceHistory(),
          ],
        ),
      ),
    );
  }
  
  Widget _buildMetricsGrid() {
    return GridView.count(
      crossAxisCount: 2,
      shrinkWrap: true,
      physics: const NeverScrollableScrollPhysics(),
      childAspectRatio: 1.5,
      children: [
        _buildMetricCard('Cold Start', '2.1s', Colors.green),
        _buildMetricCard('Memory Usage', '156MB', Colors.blue),
        _buildMetricCard('Frame Rate', '58 FPS', Colors.orange),
        _buildMetricCard('Battery Usage', '3.2%/hr', Colors.purple),
      ],
    );
  }
  
  Widget _buildMetricCard(String title, String value, Color color) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              title,
              style: const TextStyle(fontSize: 14, color: Colors.grey),
            ),
            const SizedBox(height: 8),
            Text(
              value,
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: color),
            ),
          ],
        ),
      ),
    );
  }
  
  Widget _buildBudgetStatus() {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            _buildBudgetItem('Cold Start', '2.1s', '2.5s', true),
            _buildBudgetItem('Memory Usage', '156MB', '200MB', true),
            _buildBudgetItem('Frame Rate', '58 FPS', '55 FPS', true),
            _buildBudgetItem('Battery Usage', '3.2%/hr', '5%/hr', true),
          ],
        ),
      ),
    );
  }
  
  Widget _buildBudgetItem(String metric, String current, String budget, bool withinBudget) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(metric),
          Text('$current / $budget'),
          Icon(
            withinBudget ? Icons.check_circle : Icons.warning,
            color: withinBudget ? Colors.green : Colors.orange,
          ),
        ],
      ),
    );
  }
  
  Widget _buildPerformanceHistory() {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            const Text('Performance Trends'),
            const SizedBox(height: 16),
            // Add performance chart here
            Container(
              height: 200,
              color: Colors.grey[200],
              child: const Center(
                child: Text('Performance Chart'),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

## ğŸ“‹ **Implementation Checklist | Ù‚Ø§Ø¦Ù…Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ°**

### **1. Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Budgets**
- [ ] ØªØ­Ø¯ÙŠØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] ØªØ·Ø¨ÙŠÙ‚ ÙØ­Øµ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù„Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©

### **2. Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Monitoring**
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§Ù‚Ø¨Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©

### **3. ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Alerts**
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¹ØªØ¨Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡

### **4. Ù„ÙˆØ­Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Dashboard**
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Ù„ÙˆØ­Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø¥Ø¶Ø§ÙØ© ØªØµÙˆØ±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
- [ ] Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù„ÙˆØ­Ø©

### **5. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ | Performance Optimization**
- [ ] ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ØªÙ…ØªØ© Ø§Ù„Ø£Ø¯Ø§Ø¡
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†

---

**Next Tab**: Notifications & Deep Links | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
