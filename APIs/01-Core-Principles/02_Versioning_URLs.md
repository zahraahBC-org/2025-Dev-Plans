# 02. ุงูุฅุตุฏุงุฑ ูุงููุณุงุฑุงุช | Versioning & URLs

## ๐ฏ **ูุธุฑุฉ ุนุงูุฉ | Overview**

ูุนุงููุฑ ุชุณููุฉ ุงููุณุงุฑุงุช ูุฅุฏุงุฑุฉ ุงูุฅุตุฏุงุฑุงุช ูุถูุงู ุงุณุชูุฑุงุฑ ุงูู API ูุณูููุฉ ุงูุชุฑููุฉ.

**ุงููุฏู | Purpose**: ุชุญุฏูุฏ ููุงุนุฏ ุงููุณุงุฑุงุช ูุงูุฅุตุฏุงุฑุงุช  
**ุงูุฌูููุฑ | Audience**: ูุทูุฑู ุงูู Backendุ ูููุฏุณู ุงูู API  
**ุงููุชุทูุจุงุช | Prerequisites**: ููู [ูุจุงุฏุฆ REST](01_REST_Design_Principles.md)

---

## ๐ **ุฌุฏูู ุงููุญุชููุงุช | Table of Contents**

1. [ุงุณุชุฑุงุชูุฌูุฉ ุงูุฅุตุฏุงุฑ](#ุงุณุชุฑุงุชูุฌูุฉ-ุงูุฅุตุฏุงุฑ)
2. [ูููู ุงููุณุงุฑุงุช](#ูููู-ุงููุณุงุฑุงุช)
3. [ุงุตุทูุงุญุงุช ุงูุชุณููุฉ](#ุงุตุทูุงุญุงุช-ุงูุชุณููุฉ)
4. [ุฅุฏุงุฑุฉ ุงูุงูุชูุงู](#ุฅุฏุงุฑุฉ-ุงูุงูุชูุงู)
5. [ุฃูุซูุฉ ุนูููุฉ](#ุฃูุซูุฉ-ุนูููุฉ)

---

## 1๏ธโฃ ุงุณุชุฑุงุชูุฌูุฉ ุงูุฅุตุฏุงุฑ | Versioning Strategy {#ุงุณุชุฑุงุชูุฌูุฉ-ุงูุฅุตุฏุงุฑ}

### **ููุฌ ุงูุฅุตุฏุงุฑ ูู ุงููุณุงุฑ | Path Versioning (ููุตู ุจู)**

#### **ุงูุจููุฉ ุงูุฃุณุงุณูุฉ**
```
https://api.zahraah.com/v{major}/resource
                        โโโฌโโ
                     ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณู
```

#### **ุฃูุซูุฉ**
```
โ https://api.zahraah.com/v1/products
โ https://api.zahraah.com/v2/orders
โ https://api.zahraah.com/v1/customers/123
```

---

### **Semantic Versioning (SemVer) ุงููุจุณุท**

```
v{MAJOR}
  โโโโโโโ
   ููุท ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณู ูู ุงููุณุงุฑ
```

#### **ูุชู ูุฒูุฏ ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณูุ**

| ุงูุชุบููุฑ | ูุซุงู | ููุน ุงูุฅุตุฏุงุฑ |
|---------|------|-------------|
| **ูุณุฑ ุงูุชูุงูู** | ุฅุฒุงูุฉ ุญูู | v1 โ **v2** |
| **ูุณุฑ ุงูุชูุงูู** | ุชุบููุฑ ููุน ุงูุจูุงูุงุช | v1 โ **v2** |
| **ูุชูุงูู** | ุฅุถุงูุฉ ุญูู ุงุฎุชูุงุฑู | v1 (ููุณ ุงูุฅุตุฏุงุฑ) |
| **ูุชูุงูู** | ุฅุถุงูุฉ endpoint ุฌุฏูุฏ | v1 (ููุณ ุงูุฅุตุฏุงุฑ) |

---

### **ุณูุงุณุฉ ุงูุชูุงูู ุงูุฎููู | Backward Compatibility Policy**

#### **ุงูุชุบููุฑุงุช ุงููุชูุงููุฉ (ูุง ุชุชุทูุจ ุฅุตุฏุงุฑ ุฌุฏูุฏ)**
```json
// โ ุฅุถุงูุฉ ุญูู ุงุฎุชูุงุฑู
{
  "name": "ูุณุชุงู",
  "price": 299.00,
  "new_field": "optional"  // ุฌุฏูุฏ ููู ุงุฎุชูุงุฑู
}

// โ ุฅุถุงูุฉ ูุนุงูู ุงุณุชุนูุงู ุงุฎุชูุงุฑู
GET /v1/products?new_filter=value  // ุงุฎุชูุงุฑู

// โ ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ ูู enum
status: "pending" | "confirmed" | "new_status"  // ุฌุฏูุฏ
```

#### **ุงูุชุบููุฑุงุช ุงููุงุณุฑุฉ (ุชุชุทูุจ v2)**
```json
// โ ุฅุฒุงูุฉ ุญูู ููุฌูุฏ
{
  "name": "ูุณุชุงู"
  // "old_field": removed  // ูุณุฑ!
}

// โ ุชุบููุฑ ููุน ุงูุจูุงูุงุช
{
  "price": "299.00"  // ูุงู numberุ ุฃุตุจุญ string
}

// โ ุฌุนู ุญูู ุงุฎุชูุงุฑู ุฅูุฒุงูููุง
{
  "email": "required"  // ูุงู ุงุฎุชูุงุฑููุง
}

// โ ุชุบููุฑ ุงุณู ุงูุญูู
{
  "product_name": "ูุณุชุงู"  // ูุงู "name"
}
```

---

### **ุงุณุชุฑุงุชูุฌูุงุช ุจุฏููุฉ (ุบูุฑ ูุณุชุฎุฏูุฉ ูู ุฒูุฑุงุก)**

#### **ุงูุฅุตุฏุงุฑ ูู ุงูุฑุฃุณ | Header Versioning**
```http
GET /products
Accept: application/vnd.zahraah.v2+json
```
โ **ููุงุฐุง ูุง ูุณุชุฎุฏููุ**
- ุฃูู ูุถูุญูุง
- ุตุนูุจุฉ ูู ุงูุชูุซูู
- ุตุนูุจุฉ ูู ุงูุงุฎุชุจุงุฑ

#### **ุงูุฅุตุฏุงุฑ ูู ูุนุงูู ุงูุงุณุชุนูุงู | Query Parameter**
```
GET /products?version=2
```
โ **ููุงุฐุง ูุง ูุณุชุฎุฏููุ**
- ูุฎูุท ุจูู ูุนุงููุงุช ุงูุฃุนูุงู ูุงูุฅุตุฏุงุฑ
- ุตุนูุจุฉ ูู ุงูุชุฎุฒูู ุงููุคูุช

---

## 2๏ธโฃ ูููู ุงููุณุงุฑุงุช | URL Structure {#ูููู-ุงููุณุงุฑุงุช}

### **ุงููุณุงุฑ ุงููุงูู | Full URL**

```
https://api.zahraah.com/v1/products/123/reviews?page=2&limit=20
โโโโโโฌโโโโ โโโโโฌโโโ โโฌโ โโโโฌโโโโ โโโฌโโ โโโโโโโโโฌโโโโโโโโ
   Domain    Base  Ver Resource  ID  SubResource  Query Params
```

#### **ุงูููููุงุช**
1. **Domain**: `api.zahraah.com`
2. **Base Path**: `/` (ุงุฎุชูุงุฑู)
3. **Version**: `/v1`
4. **Resource**: `/products`
5. **Resource ID**: `/123`
6. **Sub-Resource**: `/reviews`
7. **Query Parameters**: `?page=2&limit=20`

---

### **ููุงุนุฏ ุงููุณุงุฑุงุช | Path Rules**

#### **1. ุงูููุงุฑุฏ ุงูุฑุฆูุณูุฉ | Top-Level Resources**
```
โ /v1/products          - ูุงุฆูุฉ ุงูููุชุฌุงุช
โ /v1/products/123      - ููุชุฌ ูุญุฏุฏ
โ /v1/categories        - ูุงุฆูุฉ ุงููุฆุงุช
โ /v1/orders            - ูุงุฆูุฉ ุงูุทูุจุงุช
```

#### **2. ุงูููุงุฑุฏ ุงููุฑุนูุฉ | Sub-Resources**
```
โ /v1/products/123/reviews      - ูุฑุงุฌุนุงุช ุงูููุชุฌ
โ /v1/products/123/variants     - ูุณุฎ ุงูููุชุฌ
โ /v1/orders/456/items          - ุนูุงุตุฑ ุงูุทูุจ
โ /v1/customers/789/addresses   - ุนูุงููู ุงูุนููู
```

#### **3. ุงูุฅุฌุฑุงุกุงุช ุงูุฎุงุตุฉ | Special Actions**
```
โ /v1/orders/123/cancel         - ุฅูุบุงุก ุงูุทูุจ
โ /v1/customers/789/activate    - ุชูุนูู ุงูุนููู
โ /v1/products/123/publish      - ูุดุฑ ุงูููุชุฌ
```

**ููุงุญุธุฉ**: ุงูุฅุฌุฑุงุกุงุช ุชูุณุชุฎุฏู ููุท ููุนูููุงุช ุบูุฑ ุงูููุงุณูุฉ CRUD

---

### **ุงูุญุฏ ุงูุฃูุตู ููุนูู | Maximum Depth**

#### **ุงููุงุนุฏุฉ: 2-3 ูุณุชููุงุช ูุญุฏ ุฃูุตู**
```
โ /v1/products/123/reviews               - 2 ูุณุชูู (ููุตู ุจู)
โ /v1/orders/123/items/456               - 3 ูุณุชูู (ููุจูู)
โ /v1/customers/123/orders/456/items/789 - 4+ ูุณุชูู (ุชุฌูุจ!)
```

**ุงูุจุฏูู ูููุณุงุฑุงุช ุงูุนูููุฉ**:
```
ุจุฏูุงู ูู:
โ /v1/customers/123/orders/456/items/789

ุงุณุชุฎุฏู:
โ /v1/order-items/789?order_id=456&customer_id=123
```

---

## 3๏ธโฃ ุงุตุทูุงุญุงุช ุงูุชุณููุฉ | Naming Conventions {#ุงุตุทูุงุญุงุช-ุงูุชุณููุฉ}

### **ููุงุนุฏ ุงูุชุณููุฉ | Naming Rules**

#### **1. ุฃุณูุงุก ุงูููุงุฑุฏ | Resource Names**
```
โ kebab-case ูููุณุงุฑุงุช
โ ุตูุบุฉ ุงูุฌูุน
โ ุฃุณูุงุก ูุงุถุญุฉ ููุนุจุฑุฉ
```

**ุฃูุซูุฉ**:
```
โ /products              - ุตูุบุฉ ุฌูุน
โ /order-items           - kebab-case
โ /shipping-addresses    - ูุงุถุญ
โ /getProducts           - ูุง ุฃูุนุงู
โ /product               - ูุง ููุฑุฏ
โ /order_items           - ูุง ุดุฑุทุงุช ุณูููุฉ
```

---

#### **2. ุญููู JSON | JSON Fields**
```
โ snake_case ููุญููู
โ ุงุณู ูุงุถุญ ููุนุจุฑ
```

**ุฃูุซูุฉ**:
```json
โ {
  "customer_id": 123,
  "first_name": "ุฃุญูุฏ",
  "created_at": "2025-01-08T12:00:00Z",
  "is_active": true
}

โ {
  "customerId": 123,        // camelCase
  "FirstName": "ุฃุญูุฏ",      // PascalCase
  "Created-At": "...",      // kebab-case
  "isActive": true          // camelCase
}
```

---

#### **3. ูุนุงููุงุช ุงูุงุณุชุนูุงู | Query Parameters**
```
โ snake_case
โ ุฃุณูุงุก ูุตูุฑุฉ ููุตููุฉ
```

**ุฃูุซูุฉ**:
```
โ ?page=1
โ ?limit=20
โ ?sort=-created_at
โ ?filter[status]=active
โ ?expand=category,brand

โ ?pageNumber=1          // ุชุทููู ุบูุฑ ุถุฑูุฑู
โ ?LIMIT=20             // ุฃุญุฑู ูุจูุฑุฉ
โ ?filter-status=active // kebab-case
```

---

### **ุฃูุซูุฉ ููุงุฑุฏ ุฒูุฑุงุก | Zahraah Resources**

| ุงูููุฑุฏ | ุงููุณุงุฑ | ุงููุตู |
|--------|--------|-------|
| **ุงูููุชุฌุงุช** | `/v1/products` | ูุชุงููุฌ ุงูููุชุฌุงุช |
| **ุงููุฆุงุช** | `/v1/categories` | ูุฆุงุช ุงูููุชุฌุงุช |
| **ุงูุนููุงุก** | `/v1/customers` | ุญุณุงุจุงุช ุงูุนููุงุก |
| **ุงูุทูุจุงุช** | `/v1/orders` | ุทูุจุงุช ุงูุดุฑุงุก |
| **ุงููุฏููุนุงุช** | `/v1/payments` | ูุนุงููุงุช ุงูุฏูุน |
| **ุงูุดุญูุงุช** | `/v1/shipments` | ุชุชุจุน ุงูุดุญู |
| **ุงููุฑุชุฌุนุงุช** | `/v1/returns` | ุทูุจุงุช ุงูุฅุฑุฌุงุน |
| **ุงูุณูุฉ** | `/v1/carts` | ุณูุงุช ุงูุชุณูู |
| **ุงููุฑุงุฌุนุงุช** | `/v1/reviews` | ูุฑุงุฌุนุงุช ุงูููุชุฌุงุช |
| **ุงูููุงุฆู ุงูููุถูุฉ** | `/v1/wishlists` | ููุงุฆู ุงูุฑุบุจุงุช |
| **ุงููุณุงุฆู** | `/v1/coupons` | ูุณุงุฆู ุงูุฎุตู |
| **ุงูุนูุงููู** | `/v1/addresses` | ุนูุงููู ุงูุชูุตูู |

---

## 4๏ธโฃ ุฅุฏุงุฑุฉ ุงูุงูุชูุงู | Transition Management {#ุฅุฏุงุฑุฉ-ุงูุงูุชูุงู}

### **ุณูุงุณุฉ ุงูุฅููุงู | Deprecation Policy**

#### **ุงูุฎุทูุงุช**
```
1. ุฅุนูุงู (Announcement)     - 90 ููู ูุจู
2. ุชุญุฐูุฑุงุช (Warnings)       - 60 ููู ูุจู
3. ูุงูุฐุฉ ูุชูุงุฒูุฉ (Parallel)  - 60 ููู
4. ุงูุฅููุงู (Sunset)         - ุจุนุฏ 90+ ููู
```

---

### **ุฑุคูุณ ุงูุฅููุงู | Deprecation Headers**

```http
HTTP/1.1 200 OK
Deprecation: true
Sunset: Wed, 08 Apr 2025 12:00:00 GMT
Link: </v2/products>; rel="alternate"
Warning: 299 - "This endpoint is deprecated. Please migrate to /v2/products"
```

**ุงูุชูุงุตูู**:
- `Deprecation`: ูุดูุฑ ุฅูู ุฃู ุงูู endpoint ุณูุชู ุฅููุงูู
- `Sunset`: ุชุงุฑูุฎ ุงูุฅููุงู ุงูููุงุฆู
- `Link`: ุฑุงุจุท ุงูุจุฏูู ุงูุฌุฏูุฏ
- `Warning`: ุฑุณุงูุฉ ุชูุถูุญูุฉ

---

### **ุงูุฅุนูุงู ูุงูุชูุงุตู | Communication**

#### **ูููุงุช ุงูุฅุนูุงู**
1. **ุจูุงุจุฉ ุงููุทูุฑูู**: ุฅุดุนุงุฑ ุจุงุฑุฒ
2. **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ูุฌููุน ูุณุชุฎุฏูู ุงูู API
3. **Changelog**: ุชูุซูู ููุตู
4. **ุฑุคูุณ HTTP**: ูู ูู ุงุณุชุฌุงุจุฉ

#### **ูุญุชูู ุงูุฅุนูุงู**
```markdown
## โ๏ธ ุฅููุงู /v1/products

**ุชุงุฑูุฎ ุงูุฅุนูุงู**: 2025-01-08
**ุชุงุฑูุฎ ุงูุฅููุงู**: 2025-04-08

### ุงูุชุบููุฑุงุช
- ุญูู `old_field` ุชู ุฅุฒุงูุชู
- ุญูู `new_field` ุฃุตุจุญ ุฅูุฒุงูููุง

### ุงูุจุฏูู
ุงุณุชุฎุฏู `/v2/products` ุจุฏูุงู ูู `/v1/products`

### ุฏููู ุงูุชุฑุญูู
[ุฑุงุจุท ุฏููู ุงูุชุฑุญูู]
```

---

### **ูุชุฑุฉ ุงูุชุดุบูู ุงููุชูุงุฒู | Parallel Running**

```
ุงูููุช โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบ
        โโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโโค
        ููู 0   ููู 30    ููู 60  ููู 90  ููู 120
        
        ุฅุนูุงู   ุชุญุฐูุฑุงุช   v2 ุฅุทูุงู  ุฅููุงู   ููุงุฆู
        
v1:     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
v2:     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โโ ูุชูุงุฒู โโ
```

---

## 5๏ธโฃ ุฃูุซูุฉ ุนูููุฉ | Practical Examples {#ุฃูุซูุฉ-ุนูููุฉ}

### **ูุซุงู 1: ูุงุฆูุฉ ุงูููุชุฌุงุช**
```
GET https://api.zahraah.com/v1/products?page=1&limit=20&sort=-created_at&filter[category]=dresses
```

**ุงูุชุญููู**:
- โ ุงูุฅุตุฏุงุฑ ูู ุงููุณุงุฑ: `/v1`
- โ ุงูููุฑุฏ ุจุตูุบุฉ ุงูุฌูุน: `products`
- โ ูุนุงููุงุช ุจู snake_case: `filter[category]`

---

### **ูุซุงู 2: ุชูุงุตูู ููุชุฌ ูุญุฏุฏ**
```
GET https://api.zahraah.com/v1/products/123?expand=category,brand
```

**ุงูุชุญููู**:
- โ ูุนุฑู ุงูููุฑุฏ: `123`
- โ ุชูุณูุน ุงูุนูุงูุงุช: `expand`

---

### **ูุซุงู 3: ูุฑุงุฌุนุงุช ููุชุฌ**
```
GET https://api.zahraah.com/v1/products/123/reviews?page=1&sort=-rating
```

**ุงูุชุญููู**:
- โ ููุฑุฏ ูุฑุนู: `reviews`
- โ ุงููุฑุฒ: `sort=-rating` (ุชูุงุฒูู)

---

### **ูุซุงู 4: ุฅูุดุงุก ุทูุจ**
```
POST https://api.zahraah.com/v1/orders
Content-Type: application/json
Idempotency-Key: c5a8bd76-...

{
  "customer_id": 789,
  "items": [
    {
      "variant_id": 123,
      "quantity": 2
    }
  ],
  "shipping_address_id": 456,
  "payment_method": "cod"
}
```

**ุงูุชุญููู**:
- โ POST ูุฅูุดุงุก ููุฑุฏ ุฌุฏูุฏ
- โ Idempotency-Key ูููุน ุงูุชูุฑุงุฑ
- โ ุญููู JSON ุจู snake_case

---

## โ **ูุงุฆูุฉ ุงูุชุญูู | Checklist**

### **ุนูุฏ ุชุตููู ูุณุงุฑ ุฌุฏูุฏ**
- [ ] ูู ุงูุฅุตุฏุงุฑ ูู ุงููุณุงุฑุ (ูุซุงู: `/v1`)
- [ ] ูู ุงูููุฑุฏ ุจุตูุบุฉ ุงูุฌูุนุ (ูุซุงู: `products`)
- [ ] ูู ุงุณุชุฎุฏูุช `kebab-case` ูููุณุงุฑุงุชุ
- [ ] ูู ุงุณุชุฎุฏูุช `snake_case` ููุญูููุ
- [ ] ูู ุงูุนูู โค 3 ูุณุชููุงุชุ
- [ ] ูู ุงูุฃุณูุงุก ูุงุถุญุฉ ููุนุจุฑุฉุ
- [ ] ูู ูุซูุช ุงูู endpoint ูู OpenAPIุ

### **ุนูุฏ ุฅุตุฏุงุฑ ูุณุฎุฉ ุฌุฏูุฏุฉ**
- [ ] ูู ุงูุชุบููุฑุงุช ูุงุณุฑุฉ ูุนูุงูุ
- [ ] ูู ุฃุนููุช ุนู ุงูุฅููุงู ูุจู 90 ููููุงุ
- [ ] ูู ุฃุถูุช ุฑุคูุณ Deprecationุ
- [ ] ูู ููุฑุช ุฏููู ุชุฑุญููุ
- [ ] ูู ุฃุฑุณูุช ุฅุดุนุงุฑุงุช ูููุณุชุฎุฏูููุ
- [ ] ูู ุงุฎุชุจุฑุช ุงูุชุดุบูู ุงููุชูุงุฒูุ

---

## ๐ **ููุงุฑูุฉ ุงูุฅุตุฏุงุฑุงุช | Version Comparison**

| ุงูููุฒุฉ | v1 | v2 | ููุงุญุธุงุช |
|--------|----|----|---------|
| **ุงูููุชุฌุงุช** | `/v1/products` | `/v2/products` | ุญูู `old_field` ูุญุฐูู |
| **ุงูุทูุจุงุช** | `/v1/orders` | `/v2/orders` | `status` ููู ุฌุฏูุฏุฉ |
| **ุงููุฏููุนุงุช** | `/v1/payments` | ููุณู | ูุง ุชุบููุฑุงุช ูุงุณุฑุฉ |

---

## ๐ **ุงูุชููู | Navigation**

[โ ุงูุณุงุจู: ูุจุงุฏุฆ REST | Previous: REST Principles](01_REST_Design_Principles.md)

[ุงูุชุงูู: ุฃุณุงููุจ HTTP | Next: HTTP Methods & Status โ](03_HTTP_Methods_Status.md)

[๐ ุงูุนูุฏุฉ ููููุฑุณ | Back to Index](../index.md)

---

## ๐ **ุงููุฑุงุฌุน | References**

- [Semantic Versioning](https://semver.org/)
- [API Versioning Best Practices](https://www.baeldung.com/rest-versioning)
- [Deprecation Header RFC](https://tools.ietf.org/id/draft-dalal-deprecation-header-01.html)
- [URL Design Guidelines](https://restfulapi.net/resource-naming/)

---

**ุงูุฅุตุฏุงุฑ | Version**: 1.0  
**ุขุฎุฑ ุชุญุฏูุซ | Last Updated**: 2025-01-08  
**ุงูุญุงูุฉ | Status**: โ ูุฑุงุฌุน ููุนุชูุฏ | Reviewed and Approved